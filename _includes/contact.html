<!-- Ready to Learn More or Get Started? -->
<section id="contact">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2>Ready to Learn More or Get Started?</h2>
        <hr class="star-primary">
      </div>
    </div>

    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 text-center" style="margin-bottom:20px;">
        <a id="toggle-form-btn"
           class="btn btn-primary btn-lg"
           data-toggle="collapse"
           href="#get-started-form"
           aria-expanded="false"
           aria-controls="get-started-form">
          Show Form
        </a>
        <div style="margin-top:10px; font-size:14px;">
          Prefer a new tab? <a href="https://form.jotform.com/252365550897165" target="_blank" rel="noopener">Open the form directly</a>.
        </div>
      </div>
    </div>

    <!-- Collapsible form container -->
    <div id="get-started-form" class="collapse">
      <div class="row">
        <div class="col-lg-10 col-lg-offset-1" style="margin-top:20px;">
          <!-- JotForm will be injected here on first open -->
          <div id="jotform-container" style="width:100%;"></div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
// Lazy-load JotForm when the collapse opens, so layout doesn't jump
(function () {
  var loaded = false;
  var btn = document.getElementById('toggle-form-btn');

  function loadJotForm() {
    if (loaded) return;
    var s = document.createElement('script');
    s.src = 'https://form.jotform.com/jsform/252365550897165';
    s.async = true;
    document.getElementById('jotform-container').appendChild(s);
    loaded = true;
  }

  // Bootstrap 3 collapse events (jQuery is present in this theme)
  if (window.jQuery) {
    jQuery('#get-started-form')
      .on('show.bs.collapse', function () {
        if (btn) btn.textContent = 'Hide Form';
        // Defer to ensure the container is visible before JotForm measures height
        setTimeout(loadJotForm, 0);
      })
      .on('hide.bs.collapse', function () {
        if (btn) btn.textContent = 'Show Form';
      });
  } else {
    // Fallback: load on button click if jQuery isn't available for some reason
    if (btn) btn.addEventListener('click', function () {
      setTimeout(loadJotForm, 0);
    });
  }
})();
</script>
